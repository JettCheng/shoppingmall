(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"6ANv":function(t,e,n){"use strict";n.r(e),n.d(e,"ShopModule",function(){return B});var c=n("ofXK"),i=n("tyNb"),o=n("fXoL"),r=n("tk/3"),s=n("AytR");class a{constructor(){this.PageIndex=0,this.NextPageLink="",this.PageSize=6,this.PreviousPageLink="",this.TotalCount=0,this.TotalPage=0}}class p{constructor(){this.productTypeId="",this.sort="",this.keyword=""}}let u=(()=>{class t{constructor(t){this.http=t,this.baseUrl=s.a.apiUrl,this.products=[],this.productTypeList=[],this.shopParams=new p,this.paginationParams=new a,this.totalCount=0,this.sortOptions=[{name:"\u50f9\u683c",value:"orignalPrice"},{name:"\u5546\u54c1\u540d\u7a31",value:"title"}]}getProducts(){let t=new r.e;return""!==this.shopParams.productTypeId&&(t=t.append("productTypeId",this.shopParams.productTypeId)),""!==this.shopParams.keyword&&(t=t.append("keyword",this.shopParams.keyword)),""!==this.shopParams.sort&&(t=t.append("sort",this.shopParams.sort)),t=t.append("sort",this.shopParams.sort),t=t.append("pageIndex",this.paginationParams.PageIndex.toString()),t=t.append("pageSize",this.paginationParams.PageSize.toString()),this.http.get(this.baseUrl+"products",{observe:"response",params:t})}getProduct(t){return this.http.get(this.baseUrl+"products/"+t)}getProductTypes(){return this.http.get(this.baseUrl+"products/productTypes")}getShopParams(){return this.shopParams}setShopParams(t){this.shopParams=t}getPaginationParams(){return this.paginationParams}setPaginationParams(t){this.paginationParams=t}}return t.\u0275fac=function(e){return new(e||t)(o.Xb(r.b))},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=n("tc9g"),b=n("cAP4");function h(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",2),o.Tb(1,"div",3),o.Ob(2,"img",4),o.Sb(),o.Tb(3,"div",3),o.Tb(4,"h3"),o.Bc(5),o.Sb(),o.Tb(6,"p",5),o.Bc(7),o.dc(8,"currency"),o.Sb(),o.Tb(9,"div",6),o.Tb(10,"i",7),o.ac("click",function(){return o.tc(t),o.cc().decrementQuantity()}),o.Sb(),o.Tb(11,"span",8),o.Bc(12),o.Sb(),o.Tb(13,"i",9),o.ac("click",function(){return o.tc(t),o.cc().incrementQuantity()}),o.Sb(),o.Tb(14,"button",10),o.ac("click",function(){return o.tc(t),o.cc().addItemToBasket()}),o.Bc(15,"\u52a0\u5165\u8cfc\u7269\u8eca"),o.Sb(),o.Sb(),o.Sb(),o.Tb(16,"div",11),o.Tb(17,"div",12),o.Tb(18,"h4"),o.Bc(19,"Description"),o.Sb(),o.Tb(20,"p"),o.Bc(21),o.Sb(),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=o.cc();o.Cb(2),o.kc("src",t.product.coverImage,o.vc),o.kc("alt",t.product.title),o.Cb(3),o.Cc(t.product.title),o.Cb(2),o.Cc(o.ec(8,6,t.product.originalPrice)),o.Cb(5),o.Cc(t.quantity),o.Cb(9),o.Cc(t.product.description)}}let l=(()=>{class t{constructor(t,e,n,c){this.shopService=t,this.activateRoute=e,this.bcService=n,this.basketService=c,this.quantity=1,this.bcService.set("@productDetails"," ")}ngOnInit(){this.loadProduct()}loadProduct(){const t=this.activateRoute.snapshot.paramMap.get("id");this.shopService.getProduct(t).subscribe(t=>{console.log(t),this.product=t.data,this.bcService.set("@productDetails",this.product.title)},t=>{console.log(t)})}incrementQuantity(){this.quantity++}decrementQuantity(){this.quantity>1&&this.quantity--}addItemToBasket(){console.log(this.product),this.basketService.addItemToBasket(this.product,this.quantity)}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(u),o.Nb(i.a),o.Nb(d.c),o.Nb(b.a))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-product-detail"]],decls:2,vars:1,consts:[[1,"container","mt-5"],["class","row",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"img-fluid","w-100",3,"src","alt"],[2,"font-size","2em"],[1,"d-flex","justify-content-start","align-items-center"],[1,"fa","fa-minus-circle","text-warning","mr-2",2,"cursor","pointer","font-size","2em",3,"click"],[1,"font-weight-bold",2,"font-size","1.5em"],[1,"fa","fa-plus-circle","text-warning","mx-2",2,"cursor","pointer","font-size","2em",3,"click"],[1,"btn","btn-outline-primary","btn-lg","ml-4",3,"click"],[1,"row","mt-5"],[1,"col-12","ml-3"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.zc(1,h,22,8,"div",1),o.Sb()),2&t&&(o.Cb(1),o.jc("ngIf",e.product))},directives:[c.m],pipes:[c.d],styles:[""]}),t})();var g=n("/gyc"),m=n("S8xs"),f=n("3Pt+");let P=(()=>{class t{constructor(t){this.basketService=t}ngOnInit(){}addItemToBasket(){this.basketService.addItemToBasket(this.product)}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(b.a))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-product-item"]],inputs:{product:"product"},decls:14,vars:11,consts:[[1,"card","h-100","shadow-sm"],[1,"image","position-relative",2,"cursor","pointer"],[1,"img-fluid","bg-info",3,"src","alt"],[1,"d-flex","align-items-center","justify-content-center","hover-overlay"],["type","button",1,"btn","btn-primary","fa","fa-cart-plus","mr-1",3,"click"],["type","button",1,"btn","btn-primary",3,"routerLink"],[1,"card-body","d-flex","flex-column"],[3,"routerLink"],[1,"text-uppercase"],[1,"mb-2"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Ob(2,"img",2),o.Tb(3,"div",3),o.Tb(4,"button",4),o.ac("click",function(){return e.addItemToBasket()}),o.Sb(),o.Tb(5,"button",5),o.Bc(6,"\u67e5\u770b"),o.Sb(),o.Sb(),o.Sb(),o.Tb(7,"div",6),o.Tb(8,"a",7),o.Tb(9,"h6",8),o.Bc(10),o.Sb(),o.Sb(),o.Tb(11,"span",9),o.Bc(12),o.dc(13,"currency"),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Cb(2),o.kc("src",e.product.coverImage,o.vc),o.kc("alt",e.product.title),o.Cb(3),o.lc("routerLink","/shop/",e.product.id,""),o.Cb(3),o.lc("routerLink","/shop/",e.product.id,""),o.Cb(2),o.Cc(e.product.title),o.Cb(2),o.Cc(o.gc(13,6,e.product.originalPrice,"TWD",!0,"1.0-0")))},directives:[i.d,i.f],pipes:[c.d],styles:[".btn-group[_ngcontent-%COMP%]{width:100%}.btn[_ngcontent-%COMP%]{width:30%;height:40px}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{opacity:1}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{transform:none;opacity:1}.hover-overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;background:#ffffff80;opacity:0;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{z-index:1000;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{transform:translateX(-20px)}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{transform:translateX(20px)}"]}),t})();var v=n("a4eG");const S=["search"];function T(t,e){if(1&t&&(o.Tb(0,"option",17),o.Bc(1),o.Sb()),2&t){const t=e.$implicit,n=o.cc(2);o.jc("selected",n.shopParams.sort===t.value)("value",t.value),o.Cb(1),o.Dc(" ",t.name," ")}}function y(t,e){if(1&t){const t=o.Ub();o.Rb(0,18),o.Tb(1,"p",20),o.ac("click",function(){o.tc(t);const n=e.$implicit;return o.cc(3).onProductTypeSelected(n.id)}),o.Bc(2),o.Sb(),o.Qb()}if(2&t){const t=e.$implicit;o.Cb(2),o.Cc(t.name)}}function C(t,e){if(1&t&&(o.Rb(0,18),o.Tb(1,"accordion-group",19),o.zc(2,y,3,1,"ng-container",16),o.Sb(),o.Qb()),2&t){const t=e.$implicit;o.Cb(1),o.kc("heading",t.name),o.Cb(1),o.jc("ngForOf",t.childType)}}function k(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"h5",11),o.Bc(2,"\u6392\u5e8f\u689d\u4ef6"),o.Sb(),o.Tb(3,"select",12),o.ac("change",function(e){return o.tc(t),o.cc().onSortSelected(e.target.value)}),o.zc(4,T,2,3,"option",13),o.Sb(),o.Tb(5,"div",5),o.Tb(6,"accordion",14),o.Tb(7,"button",15),o.ac("click",function(){return o.tc(t),o.cc().onAllProductClick()}),o.Bc(8,"\u5168\u90e8\u5546\u54c1"),o.Sb(),o.zc(9,C,3,2,"ng-container",16),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.cc();o.Cb(4),o.jc("ngForOf",t.sortOptions),o.Cb(2),o.jc("closeOthers",!0),o.Cb(3),o.jc("ngForOf",t.productTypeList)}}function w(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",21),o.Tb(1,"input",22,23),o.ac("keyup.enter",function(){return o.tc(t),o.cc().onSearch()}),o.Sb(),o.Tb(3,"button",24),o.ac("click",function(){return o.tc(t),o.cc().onSearch()}),o.Sb(),o.Tb(4,"button",25),o.ac("click",function(){return o.tc(t),o.cc().onReset()}),o.Sb(),o.Sb()}}function x(t,e){if(1&t&&(o.Tb(0,"div",26),o.Ob(1,"app-product-item",27),o.Sb()),2&t){const t=e.$implicit;o.Cb(1),o.jc("product",t)}}function I(t,e){if(1&t&&(o.Tb(0,"h1",28),o.Bc(1),o.Sb()),2&t){const t=o.cc();o.Cb(1),o.Cc(t.error)}}function O(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",29),o.Tb(1,"app-pager",30),o.ac("pageChanged",function(e){return o.tc(t),o.cc().onPageChanged(e)}),o.Sb(),o.Sb()}if(2&t){const t=o.cc();o.Cb(1),o.jc("pageSize",t.paginationParams.PageSize)("totalCount",t.paginationParams.TotalCount)("pageIndex",t.paginationParams.PageIndex)}}const z=[{path:"",component:(()=>{class t{constructor(t){this.shopService=t,this.products=[],this.productTypeList=[],this.shopParams=new p,this.paginationParams=new a,this.sortOptions=[{name:"\u540d\u7a31",value:"titie"},{name:"\u50f9\u683c\u7531\u4f4e\u5230\u9ad8",value:"originalPrice asc"},{name:"\u50f9\u683c\u7531\u9ad8\u5230\u4f4e",value:"originalPrice desc"}]}ngOnInit(){this.getProductTypes(),this.getProducts()}onProductTypeSelected(t){const e=this.shopService.getShopParams(),n=this.shopService.getPaginationParams();e.productTypeId=t,n.PageIndex=1,this.shopService.setShopParams(e),this.shopService.setPaginationParams(n),this.getProducts()}onSearch(){const t=this.shopService.getShopParams(),e=this.shopService.getPaginationParams();t.keyword=this.searchTerm.nativeElement.value,e.PageIndex=1,this.shopService.setShopParams(t),this.shopService.setPaginationParams(e),this.getProducts()}onReset(){this.searchTerm.nativeElement.value="",this.shopParams=new p,this.shopService.setShopParams(this.shopParams),this.getProducts()}onPageChanged(t){this.shopService.getShopParams();const e=this.shopService.getPaginationParams();e.PageIndex!==t&&(e.PageIndex=t,this.shopService.setPaginationParams(e),this.getProducts())}onAllProductClick(){const t=new p,e=new a;this.shopService.setShopParams(t),this.shopService.setPaginationParams(e),this.getProducts()}onSortSelected(t){const e=this.shopService.getShopParams();e.sort=t,this.shopService.setShopParams(e),this.getProducts()}getProductTypes(){this.shopService.getProductTypes().subscribe(t=>{this.productTypeList=t.data.filter(t=>0===t.level),this.productTypeList.forEach(t=>t.childType=[]),t.data.filter(t=>1===t.level).forEach(t=>{this.productTypeList.forEach(e=>{t.parentId===e.id&&e.childType.push(t)})})},t=>{console.log(t)})}getProducts(){this.shopService.getProducts().subscribe(t=>{var e;this.products=null===(e=t.body)||void 0===e?void 0:e.data;var n=t.headers.get("x-pagination");this.paginationParams=JSON.parse(n)},t=>{404===t.error.statusCode&&(this.products=[],this.shopParams=new p,this.paginationParams=new a,this.error=t.error.message)})}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(u))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-shop"]],viewQuery:function(t,e){if(1&t&&o.Fc(S,1),2&t){let t;o.rc(t=o.bc())&&(e.searchTerm=t.first)}},decls:12,vars:8,consts:[[1,"container","mt-6"],[1,"row"],[1,"col-3"],[4,"ngIf"],[1,"col-9"],[1,"d-flex","justify-content-between","align-items-center","pb-2"],[3,"totalCount","pageIndex","pageSize"],["class","form-inline mt-2",4,"ngIf"],["class","col-4 mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center mt-5",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"text-warning","ml-3","mt-3","mb-4"],[1,"form-select","mb-4",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"accordion",3,"closeOthers"],[1,"btn","btn-primary","ml-4","mb-3","mt-3",3,"click"],["class","list-group-item",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"list-group-item"],[3,"heading"],[2,"cursor","pointer","text-align","center",3,"click"],[1,"form-inline","mt-2"],["type","text","placeholder","\u8acb\u8f38\u5165\u95dc\u9375\u5b57",1,"form-control","mr-2",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-primary","my-2","fa","fa-search",3,"click"],[1,"btn","btn-outline-success","ml-2","my-2","fa","fa-times-circle",3,"click"],[1,"col-4","mb-4"],[3,"product"],[1,"d-flex","justify-content-center","mt-5"],[1,"d-flex","justify-content-center"],[3,"pageSize","totalCount","pageIndex","pageChanged"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Tb(2,"section",2),o.zc(3,k,10,3,"ng-container",3),o.Sb(),o.Tb(4,"section",4),o.Tb(5,"div",5),o.Ob(6,"app-paging-header",6),o.zc(7,w,5,0,"div",7),o.Sb(),o.Tb(8,"div",1),o.zc(9,x,2,1,"div",8),o.Sb(),o.zc(10,I,2,1,"h1",9),o.zc(11,O,2,3,"div",10),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Cb(3),o.jc("ngIf",e.productTypeList),o.Cb(3),o.jc("totalCount",e.paginationParams.TotalCount)("pageIndex",e.paginationParams.PageIndex)("pageSize",e.paginationParams.PageSize),o.Cb(1),o.jc("ngIf",e.products),o.Cb(2),o.jc("ngForOf",e.products),o.Cb(1),o.jc("ngIf",e.paginationParams.TotalCount<=0),o.Cb(1),o.jc("ngIf",e.paginationParams.TotalCount>0))},directives:[c.m,g.a,c.l,m.a,f.m,f.r,m.c,P,v.a],styles:[".list-group-item[_ngcontent-%COMP%]{cursor:pointer;border:none;padding:10px 20px;font-size:1.1em}.list-group-item[_ngcontent-%COMP%]:focus{outline:none}.list-group-item.active[_ngcontent-%COMP%]{border-radius:10px}.list-group-item[_ngcontent-%COMP%]:not(.active):hover{color:#fff;background-color:rgba(233,86,32,.705);border-radius:10px}button[_ngcontent-%COMP%]{text-decoration:none}"]}),t})()},{path:":id",component:l,data:{breadcrumb:{alias:"productDetails"}}}];let j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Lb({type:t}),t.\u0275inj=o.Kb({imports:[[i.g.forChild(z)],i.g]}),t})();var M=n("PCNd");let B=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Lb({type:t}),t.\u0275inj=o.Kb({imports:[[c.c,M.a,j]]}),t})()}}]);