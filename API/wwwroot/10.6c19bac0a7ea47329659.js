(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"6ANv":function(t,e,n){"use strict";n.r(e),n.d(e,"ShopModule",function(){return M});var c=n("SVse"),i=n("iInd"),o=n("XGsO"),r=n("8Y7J"),a=n("mwRl"),s=n("GlbF"),p=n("cAP4");function l(t,e){if(1&t){const t=r.Wb();r.Vb(0,"div",2),r.Qb(1,"div",3),r.Vb(2,"div",4),r.Qb(3,"ngx-gallery",5),r.Ub(),r.Vb(4,"div",6),r.Vb(5,"h3"),r.Gc(6),r.Ub(),r.Vb(7,"p",7),r.Gc(8),r.fc(9,"currency"),r.Ub(),r.Vb(10,"div",8),r.Vb(11,"i",9),r.cc("click",function(){return r.yc(t),r.ec().decrementQuantity()}),r.Ub(),r.Vb(12,"span",10),r.Gc(13),r.Ub(),r.Vb(14,"i",11),r.cc("click",function(){return r.yc(t),r.ec().incrementQuantity()}),r.Ub(),r.Vb(15,"button",12),r.cc("click",function(){return r.yc(t),r.ec().addItemToBasket()}),r.Gc(16,"\u52a0\u5165\u8cfc\u7269\u8eca"),r.Ub(),r.Ub(),r.Vb(17,"h4",13),r.Gc(18,"\u5546\u54c1\u63cf\u8ff0"),r.Ub(),r.Vb(19,"p"),r.Gc(20),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=r.ec();r.Cb(3),r.mc("options",t.galleryOptions)("images",t.galleryImages),r.Cb(3),r.Hc(t.product.title),r.Cb(2),r.Hc(r.jc(9,6,t.product.originalPrice,"TWD",!0,"1.0-0")),r.Cb(5),r.Hc(t.quantity),r.Cb(7),r.Hc(t.product.description)}}let u=(()=>{class t{constructor(t,e,n,c){this.shopService=t,this.activateRoute=e,this.bcService=n,this.basketService=c,this.galleryOptions=[],this.galleryImages=[],this.quantity=1,this.bcService.set("@productDetails"," ")}ngOnInit(){this.loadProduct(),this.galleryOptions=[{width:"600px",height:"600px",thumbnailsColumns:4,arrowPrevIcon:"fa fa-chevron-left",arrowNextIcon:"fa fa-chevron-right",imageAnimation:o.a.Slide},{breakpoint:800,width:"100%",height:"600px",imagePercent:80,thumbnailsPercent:20,thumbnailsMargin:20,thumbnailMargin:20},{breakpoint:400,preview:!1}]}setProductImage(t){this.galleryImages.push({small:t,medium:t,big:t})}loadProduct(){const t=this.activateRoute.snapshot.paramMap.get("id");this.shopService.getProduct(t).subscribe(t=>{this.product=t.data,t.data.productImages.length>0?t.data.productImages.map(t=>{this.setProductImage(t.url)}):this.setProductImage("data:image/png;base64,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"),this.bcService.set("@productDetails",this.product.title)},t=>{console.log(t)})}incrementQuantity(){this.quantity++}decrementQuantity(){this.quantity>1&&this.quantity--}addItemToBasket(){console.log(this.product),this.basketService.addItemToBasket(this.product,this.quantity)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a.a),r.Pb(i.a),r.Pb(s.c),r.Pb(p.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-product-detail"]],decls:2,vars:1,consts:[[1,"container","mt-5"],["class","row",4,"ngIf"],[1,"row"],[1,"col-1"],[1,"col-5",2,"min-height","400px"],[1,"ngx-gallery",3,"options","images"],[1,"col-5"],[2,"font-size","2em"],[1,"d-flex","justify-content-start","align-items-center"],[1,"fa","fa-minus-circle","text-warning","mr-2",2,"cursor","pointer","font-size","2em",3,"click"],[1,"font-weight-bold",2,"font-size","1.5em"],[1,"fa","fa-plus-circle","text-warning","mx-2",2,"cursor","pointer","font-size","2em",3,"click"],[1,"btn","btn-outline-primary","btn-lg","ml-4",3,"click"],[1,"mt-5","mb-2"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Ec(1,l,21,11,"div",1),r.Ub()),2&t&&(r.Cb(1),r.mc("ngIf",e.product))},directives:[c.m,o.b],pipes:[c.d],styles:[""]}),t})();var d=n("6/Dz"),b=n("XJHN"),h=n("/gyc"),m=n("lQde"),g=n("s7LF");let f=(()=>{class t{constructor(t){this.basketService=t}ngOnInit(){}addItemToBasket(){this.basketService.addItemToBasket(this.product)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(p.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-product-item"]],inputs:{product:"product"},decls:14,vars:11,consts:[[1,"card","h-100","shadow-sm"],[1,"image","position-relative",2,"cursor","pointer"],[1,"img-fluid","bg-info",3,"src","alt"],[1,"d-flex","align-items-center","justify-content-center","hover-overlay"],["type","button",1,"btn","btn-primary","fa","fa-cart-plus","mr-1",3,"click"],["type","button",1,"btn","btn-primary",3,"routerLink"],[1,"card-body","d-flex","flex-column"],[3,"routerLink"],[1,"text-uppercase"],[1,"mb-2"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Qb(2,"img",2),r.Vb(3,"div",3),r.Vb(4,"button",4),r.cc("click",function(){return e.addItemToBasket()}),r.Ub(),r.Vb(5,"button",5),r.Gc(6,"\u67e5\u770b"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",6),r.Vb(8,"a",7),r.Vb(9,"h6",8),r.Gc(10),r.Ub(),r.Ub(),r.Vb(11,"span",9),r.Gc(12),r.fc(13,"currency"),r.Ub(),r.Ub(),r.Ub()),2&t&&(r.Cb(2),r.nc("src",e.product.coverImage,r.Ac),r.nc("alt",e.product.title),r.Cb(3),r.oc("routerLink","/shop/",e.product.id,""),r.Cb(3),r.oc("routerLink","/shop/",e.product.id,""),r.Cb(2),r.Hc(e.product.title),r.Cb(2),r.Hc(r.jc(13,6,e.product.originalPrice,"TWD",!0,"1.0-0")))},directives:[i.d,i.f],pipes:[c.d],styles:[".btn-group[_ngcontent-%COMP%]{width:100%}.btn[_ngcontent-%COMP%]{width:30%;height:40px}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{opacity:1}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{transform:none;opacity:1}.hover-overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;background:#ffffff80;opacity:0;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{z-index:1000;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{transform:translateX(-20px)}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{transform:translateX(20px)}"]}),t})();var v=n("a4eG");const P=["search"];function A(t,e){if(1&t&&(r.Vb(0,"option",17),r.Gc(1),r.Ub()),2&t){const t=e.$implicit,n=r.ec(2);r.mc("selected",n.shopParams.sort===t.value)("value",t.value),r.Cb(1),r.Ic(" ",t.name," ")}}function y(t,e){if(1&t){const t=r.Wb();r.Tb(0,18),r.Vb(1,"p",20),r.cc("click",function(){r.yc(t);const n=e.$implicit;return r.ec(3).onProductTypeSelected(n.id)}),r.Gc(2),r.Ub(),r.Sb()}if(2&t){const t=e.$implicit;r.Cb(2),r.Hc(t.name)}}function C(t,e){if(1&t&&(r.Tb(0,18),r.Vb(1,"accordion-group",19),r.Ec(2,y,3,1,"ng-container",16),r.Ub(),r.Sb()),2&t){const t=e.$implicit;r.Cb(1),r.nc("heading",t.name),r.Cb(1),r.mc("ngForOf",t.childType)}}function S(t,e){if(1&t){const t=r.Wb();r.Tb(0),r.Vb(1,"h5",11),r.Gc(2,"\u6392\u5e8f\u689d\u4ef6"),r.Ub(),r.Vb(3,"select",12),r.cc("change",function(e){return r.yc(t),r.ec().onSortSelected(e.target.value)}),r.Ec(4,A,2,3,"option",13),r.Ub(),r.Vb(5,"div",5),r.Vb(6,"accordion",14),r.Vb(7,"button",15),r.cc("click",function(){return r.yc(t),r.ec().onAllProductClick()}),r.Gc(8,"\u5168\u90e8\u5546\u54c1"),r.Ub(),r.Ec(9,C,3,2,"ng-container",16),r.Ub(),r.Ub(),r.Sb()}if(2&t){const t=r.ec();r.Cb(4),r.mc("ngForOf",t.sortOptions),r.Cb(2),r.mc("closeOthers",!0),r.Cb(3),r.mc("ngForOf",t.productTypeList)}}function V(t,e){if(1&t){const t=r.Wb();r.Vb(0,"div",21),r.Vb(1,"input",22,23),r.cc("keyup.enter",function(){return r.yc(t),r.ec().onSearch()}),r.Ub(),r.Vb(3,"button",24),r.cc("click",function(){return r.yc(t),r.ec().onSearch()}),r.Ub(),r.Vb(4,"button",25),r.cc("click",function(){return r.yc(t),r.ec().onReset()}),r.Ub(),r.Ub()}}function U(t,e){if(1&t&&(r.Vb(0,"div",26),r.Qb(1,"app-product-item",27),r.Ub()),2&t){const t=e.$implicit;r.Cb(1),r.mc("product",t)}}function k(t,e){if(1&t&&(r.Vb(0,"h1",28),r.Gc(1),r.Ub()),2&t){const t=r.ec();r.Cb(1),r.Hc(t.error)}}function x(t,e){if(1&t){const t=r.Wb();r.Vb(0,"div",29),r.Vb(1,"app-pager",30),r.cc("pageChanged",function(e){return r.yc(t),r.ec().onPageChanged(e)}),r.Ub(),r.Ub()}if(2&t){const t=r.ec();r.Cb(1),r.mc("pageSize",t.paginationParams.PageSize)("totalCount",t.paginationParams.TotalCount)("pageIndex",t.paginationParams.PageIndex)}}const O=[{path:"",component:(()=>{class t{constructor(t){this.shopService=t,this.products=[],this.productTypeList=[],this.shopParams=new b.a,this.paginationParams=new d.a,this.sortOptions=[{name:"\u540d\u7a31",value:"titie"},{name:"\u50f9\u683c\u7531\u4f4e\u5230\u9ad8",value:"originalPrice asc"},{name:"\u50f9\u683c\u7531\u9ad8\u5230\u4f4e",value:"originalPrice desc"}]}ngOnInit(){this.getProductTypes(),this.getProducts()}onProductTypeSelected(t){const e=this.shopService.getShopParams(),n=this.shopService.getPaginationParams();e.productTypeId=t,n.PageIndex=1,this.shopService.setShopParams(e),this.shopService.setPaginationParams(n),this.getProducts()}onSearch(){const t=this.shopService.getShopParams(),e=this.shopService.getPaginationParams();t.keyword=this.searchTerm.nativeElement.value,e.PageIndex=1,this.shopService.setShopParams(t),this.shopService.setPaginationParams(e),this.getProducts()}onReset(){this.searchTerm.nativeElement.value="",this.shopParams=new b.a,this.shopService.setShopParams(this.shopParams),this.getProducts()}onPageChanged(t){this.shopService.getShopParams();const e=this.shopService.getPaginationParams();e.PageIndex!==t&&(e.PageIndex=t,this.shopService.setPaginationParams(e),this.getProducts())}onAllProductClick(){const t=new b.a,e=new d.a;this.shopService.setShopParams(t),this.shopService.setPaginationParams(e),this.getProducts()}onSortSelected(t){const e=this.shopService.getShopParams();e.sort=t,this.shopService.setShopParams(e),this.getProducts()}getProductTypes(){this.shopService.getProductTypes().subscribe(t=>{this.productTypeList=t.data.filter(t=>0===t.level),this.productTypeList.forEach(t=>t.childType=[]),t.data.filter(t=>1===t.level).forEach(t=>{this.productTypeList.forEach(e=>{t.parentId===e.id&&e.childType.push(t)})})},t=>{console.log(t)})}getProducts(){this.shopService.getProducts().subscribe(t=>{var e;this.products=null===(e=t.body)||void 0===e?void 0:e.data;var n=t.headers.get("x-pagination");this.paginationParams=JSON.parse(n)},t=>{404===t.error.statusCode&&(this.products=[],this.shopParams=new b.a,this.paginationParams=new d.a,this.error=t.error.message)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-shop"]],viewQuery:function(t,e){if(1&t&&r.Kc(P,1),2&t){let t;r.vc(t=r.dc())&&(e.searchTerm=t.first)}},decls:12,vars:8,consts:[[1,"container","mt-6"],[1,"row"],[1,"col-3"],[4,"ngIf"],[1,"col-9"],[1,"d-flex","justify-content-between","align-items-center","pb-2"],[3,"totalCount","pageIndex","pageSize"],["class","form-inline mt-2",4,"ngIf"],["class","col-4 mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center mt-5",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"text-warning","ml-3","mt-3","mb-4"],[1,"form-select","mb-4",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"accordion",3,"closeOthers"],[1,"btn","btn-primary","ml-4","mb-3","mt-3",3,"click"],["class","list-group-item",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"list-group-item"],[3,"heading"],[2,"cursor","pointer","text-align","center",3,"click"],[1,"form-inline","mt-2"],["type","text","placeholder","\u8acb\u8f38\u5165\u95dc\u9375\u5b57",1,"form-control","mr-2",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-primary","my-2","fa","fa-search",3,"click"],[1,"btn","btn-outline-success","ml-2","my-2","fa","fa-times-circle",3,"click"],[1,"col-4","mb-4"],[3,"product"],[1,"d-flex","justify-content-center","mt-5"],[1,"d-flex","justify-content-center"],[3,"pageSize","totalCount","pageIndex","pageChanged"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"section",2),r.Ec(3,S,10,3,"ng-container",3),r.Ub(),r.Vb(4,"section",4),r.Vb(5,"div",5),r.Qb(6,"app-paging-header",6),r.Ec(7,V,5,0,"div",7),r.Ub(),r.Vb(8,"div",1),r.Ec(9,U,2,1,"div",8),r.Ub(),r.Ec(10,k,2,1,"h1",9),r.Ec(11,x,2,3,"div",10),r.Ub(),r.Ub(),r.Ub()),2&t&&(r.Cb(3),r.mc("ngIf",e.productTypeList),r.Cb(3),r.mc("totalCount",e.paginationParams.TotalCount)("pageIndex",e.paginationParams.PageIndex)("pageSize",e.paginationParams.PageSize),r.Cb(1),r.mc("ngIf",e.products),r.Cb(2),r.mc("ngForOf",e.products),r.Cb(1),r.mc("ngIf",e.paginationParams.TotalCount<=0),r.Cb(1),r.mc("ngIf",e.paginationParams.TotalCount>0))},directives:[c.m,h.a,c.l,m.a,g.m,g.r,m.c,f,v.a],styles:[".list-group-item[_ngcontent-%COMP%]{cursor:pointer;border:none;padding:10px 20px;font-size:1.1em}.list-group-item[_ngcontent-%COMP%]:focus{outline:none}.list-group-item.active[_ngcontent-%COMP%]{border-radius:10px}.list-group-item[_ngcontent-%COMP%]:not(.active):hover{color:#fff;background-color:rgba(233,86,32,.705);border-radius:10px}button[_ngcontent-%COMP%]{text-decoration:none}"]}),t})()},{path:":id",component:u,data:{breadcrumb:{alias:"productDetails"}}}];let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[i.g.forChild(O)],i.g]}),t})();var I=n("PCNd");let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[c.c,I.a,T]]}),t})()}}]);