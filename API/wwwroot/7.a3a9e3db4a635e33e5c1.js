(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"6ANv":function(t,e,n){"use strict";n.r(e),n.d(e,"ShopModule",function(){return M});var i=n("ofXK"),o=n("tyNb"),c=n("fXoL"),r=n("tk/3"),s=n("AytR");class a{constructor(){this.PageIndex=0,this.NextPageLink="",this.PageSize=6,this.PreviousPageLink="",this.TotalCount=0,this.TotalPage=0}}class p{constructor(){this.productTypeId="",this.sort="",this.keyword=""}}let u=(()=>{class t{constructor(t){this.http=t,this.baseUrl=s.a.apiUrl,this.products=[],this.productTypeList=[],this.shopParams=new p,this.paginationParams=new a,this.totalCount=0,this.sortOptions=[{name:"\u50f9\u683c",value:"orignalPrice"},{name:"\u5546\u54c1\u540d\u7a31",value:"title"}]}getProducts(){let t=new r.d;return""!==this.shopParams.productTypeId&&(t=t.append("productTypeId",this.shopParams.productTypeId)),""!==this.shopParams.keyword&&(t=t.append("keyword",this.shopParams.keyword)),""!==this.shopParams.sort&&(t=t.append("sort",this.shopParams.sort)),t=t.append("sort",this.shopParams.sort),t=t.append("pageIndex",this.paginationParams.PageIndex.toString()),t=t.append("pageSize",this.paginationParams.PageSize.toString()),this.http.get(this.baseUrl+"products",{observe:"response",params:t})}getProduct(t){return this.http.get(this.baseUrl+"products/"+t)}getProductTypes(){return this.http.get(this.baseUrl+"products/productTypes")}getShopParams(){return this.shopParams}setShopParams(t){this.shopParams=t}getPaginationParams(){return this.paginationParams}setPaginationParams(t){this.paginationParams=t}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(r.b))},t.\u0275prov=c.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=n("tc9g");function d(t,e){if(1&t){const t=c.Sb();c.Rb(0,"div",2),c.Rb(1,"div",3),c.Mb(2,"img",4),c.Qb(),c.Rb(3,"div",3),c.Rb(4,"h3"),c.xc(5),c.Qb(),c.Rb(6,"p",5),c.xc(7),c.bc(8,"currency"),c.Qb(),c.Rb(9,"div",6),c.Rb(10,"i",7),c.Yb("click",function(){return c.qc(t),c.ac().decrementQuantity()}),c.Qb(),c.Rb(11,"span",8),c.xc(12),c.Qb(),c.Rb(13,"i",9),c.Yb("click",function(){return c.qc(t),c.ac().incrementQuantity()}),c.Qb(),c.Rb(14,"button",10),c.Yb("click",function(){return c.qc(t),c.ac().addItemToBasket()}),c.xc(15,"\u52a0\u5165\u8cfc\u7269\u8eca"),c.Qb(),c.Qb(),c.Qb(),c.Rb(16,"div",11),c.Rb(17,"div",12),c.Rb(18,"h4"),c.xc(19,"Description"),c.Qb(),c.Rb(20,"p"),c.xc(21),c.Qb(),c.Qb(),c.Qb(),c.Qb()}if(2&t){const t=c.ac();c.Ab(2),c.hc("src",t.product.coverImageUrl,c.sc),c.hc("alt",t.product.title),c.Ab(3),c.yc(t.product.title),c.Ab(2),c.yc(c.cc(8,6,t.product.originalPrice)),c.Ab(5),c.yc(t.quantity),c.Ab(9),c.yc(t.product.description)}}let h=(()=>{class t{constructor(t,e,n){this.shopService=t,this.activateRoute=e,this.bcService=n,this.quantity=1,this.bcService.set("@productDetails"," ")}ngOnInit(){this.loadProduct()}loadProduct(){const t=this.activateRoute.snapshot.paramMap.get("id");this.shopService.getProduct(t).subscribe(t=>{this.product=t.data,this.bcService.set("@productDetails",this.product.title)},t=>{console.log(t)})}incrementQuantity(){this.quantity++}decrementQuantity(){this.quantity>1&&this.quantity--}addItemToBasket(){}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(u),c.Lb(o.a),c.Lb(b.c))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-product-detail"]],decls:2,vars:1,consts:[[1,"container","mt-5"],["class","row",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"img-fluid","w-100",3,"src","alt"],[2,"font-size","2em"],[1,"d-flex","justify-content-start","align-items-center"],[1,"fa","fa-minus-circle","text-warning","mr-2",2,"cursor","pointer","font-size","2em",3,"click"],[1,"font-weight-bold",2,"font-size","1.5em"],[1,"fa","fa-plus-circle","text-warning","mx-2",2,"cursor","pointer","font-size","2em",3,"click"],[1,"btn","btn-outline-primary","btn-lg","ml-4",3,"click"],[1,"row","mt-5"],[1,"col-12","ml-3"]],template:function(t,e){1&t&&(c.Rb(0,"div",0),c.vc(1,d,22,8,"div",1),c.Qb()),2&t&&(c.Ab(1),c.gc("ngIf",e.product))},directives:[i.l],pipes:[i.d],styles:[""]}),t})();var l=n("/gyc"),g=n("S8xs"),m=n("3Pt+"),f=n("cAP4");let P=(()=>{class t{constructor(t){this.basketService=t}ngOnInit(){}addItemToBasket(){this.basketService.addItemToBasket(this.product)}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(f.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-product-item"]],inputs:{product:"product"},decls:14,vars:11,consts:[[1,"card","h-100","shadow-sm"],[1,"image","position-relative",2,"cursor","pointer"],[1,"img-fluid","bg-info",3,"src","alt"],[1,"d-flex","align-items-center","justify-content-center","hover-overlay"],["type","button",1,"btn","btn-primary","fa","fa-cart-plus","mr-1",3,"click"],["type","button",1,"btn","btn-primary",3,"routerLink"],[1,"card-body","d-flex","flex-column"],[3,"routerLink"],[1,"text-uppercase"],[1,"mb-2"]],template:function(t,e){1&t&&(c.Rb(0,"div",0),c.Rb(1,"div",1),c.Mb(2,"img",2),c.Rb(3,"div",3),c.Rb(4,"button",4),c.Yb("click",function(){return e.addItemToBasket()}),c.Qb(),c.Rb(5,"button",5),c.xc(6,"\u67e5\u770b"),c.Qb(),c.Qb(),c.Qb(),c.Rb(7,"div",6),c.Rb(8,"a",7),c.Rb(9,"h6",8),c.xc(10),c.Qb(),c.Qb(),c.Rb(11,"span",9),c.xc(12),c.bc(13,"currency"),c.Qb(),c.Qb(),c.Qb()),2&t&&(c.Ab(2),c.hc("src",e.product.coverImageUrl,c.sc),c.hc("alt",e.product.title),c.Ab(3),c.ic("routerLink","/shop/",e.product.id,""),c.Ab(3),c.ic("routerLink","/shop/",e.product.id,""),c.Ab(2),c.yc(e.product.title),c.Ab(2),c.yc(c.dc(13,6,e.product.originalPrice,"TWD",!0,"1.0-0")))},directives:[o.d,o.f],pipes:[i.d],styles:[".btn-group[_ngcontent-%COMP%]{width:100%}.btn[_ngcontent-%COMP%]{width:30%;height:40px}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{opacity:1}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{transform:none;opacity:1}.hover-overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;background:#ffffff80;opacity:0;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{z-index:1000;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{transform:translateX(-20px)}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{transform:translateX(20px)}"]}),t})();var v=n("a4eG");const y=["search"];function S(t,e){if(1&t&&(c.Rb(0,"option",17),c.xc(1),c.Qb()),2&t){const t=e.$implicit,n=c.ac(2);c.gc("selected",n.shopParams.sort===t.value)("value",t.value),c.Ab(1),c.zc(" ",t.name," ")}}function x(t,e){if(1&t){const t=c.Sb();c.Pb(0,18),c.Rb(1,"p",20),c.Yb("click",function(){c.qc(t);const n=e.$implicit;return c.ac(3).onProductTypeSelected(n.id)}),c.xc(2),c.Qb(),c.Ob()}if(2&t){const t=e.$implicit;c.Ab(2),c.yc(t.name)}}function Q(t,e){if(1&t&&(c.Pb(0,18),c.Rb(1,"accordion-group",19),c.vc(2,x,3,1,"ng-container",16),c.Qb(),c.Ob()),2&t){const t=e.$implicit;c.Ab(1),c.hc("heading",t.name),c.Ab(1),c.gc("ngForOf",t.childType)}}function R(t,e){if(1&t){const t=c.Sb();c.Pb(0),c.Rb(1,"h5",11),c.xc(2,"\u6392\u5e8f\u689d\u4ef6"),c.Qb(),c.Rb(3,"select",12),c.Yb("change",function(e){return c.qc(t),c.ac().onSortSelected(e.target.value)}),c.vc(4,S,2,3,"option",13),c.Qb(),c.Rb(5,"div",5),c.Rb(6,"accordion",14),c.Rb(7,"button",15),c.Yb("click",function(){return c.qc(t),c.ac().onAllProductClick()}),c.xc(8,"\u5168\u90e8\u5546\u54c1"),c.Qb(),c.vc(9,Q,3,2,"ng-container",16),c.Qb(),c.Qb(),c.Ob()}if(2&t){const t=c.ac();c.Ab(4),c.gc("ngForOf",t.sortOptions),c.Ab(2),c.gc("closeOthers",!0),c.Ab(3),c.gc("ngForOf",t.productTypeList)}}function k(t,e){if(1&t){const t=c.Sb();c.Rb(0,"div",21),c.Rb(1,"input",22,23),c.Yb("keyup.enter",function(){return c.qc(t),c.ac().onSearch()}),c.Qb(),c.Rb(3,"button",24),c.Yb("click",function(){return c.qc(t),c.ac().onSearch()}),c.Qb(),c.Rb(4,"button",25),c.Yb("click",function(){return c.qc(t),c.ac().onReset()}),c.Qb(),c.Qb()}}function w(t,e){if(1&t&&(c.Rb(0,"div",26),c.Mb(1,"app-product-item",27),c.Qb()),2&t){const t=e.$implicit;c.Ab(1),c.gc("product",t)}}function I(t,e){if(1&t&&(c.Rb(0,"h1",28),c.xc(1),c.Qb()),2&t){const t=c.ac();c.Ab(1),c.yc(t.error)}}function C(t,e){if(1&t){const t=c.Sb();c.Rb(0,"div",29),c.Rb(1,"app-pager",30),c.Yb("pageChanged",function(e){return c.qc(t),c.ac().onPageChanged(e)}),c.Qb(),c.Qb()}if(2&t){const t=c.ac();c.Ab(1),c.gc("pageSize",t.paginationParams.PageSize)("totalCount",t.paginationParams.TotalCount)("pageIndex",t.paginationParams.PageIndex)}}const O=[{path:"",component:(()=>{class t{constructor(t){this.shopService=t,this.products=[],this.productTypeList=[],this.shopParams=new p,this.paginationParams=new a,this.sortOptions=[{name:"\u540d\u7a31",value:"titie"},{name:"\u50f9\u683c\u7531\u4f4e\u5230\u9ad8",value:"originalPrice asc"},{name:"\u50f9\u683c\u7531\u9ad8\u5230\u4f4e",value:"originalPrice desc"}]}ngOnInit(){this.getProductTypes(),this.getProducts()}onProductTypeSelected(t){const e=this.shopService.getShopParams(),n=this.shopService.getPaginationParams();e.productTypeId=t,n.PageIndex=1,this.shopService.setShopParams(e),this.shopService.setPaginationParams(n),this.getProducts()}onSearch(){const t=this.shopService.getShopParams(),e=this.shopService.getPaginationParams();t.keyword=this.searchTerm.nativeElement.value,e.PageIndex=1,this.shopService.setShopParams(t),this.shopService.setPaginationParams(e),this.getProducts()}onReset(){this.searchTerm.nativeElement.value="",this.shopParams=new p,this.shopService.setShopParams(this.shopParams),this.getProducts()}onPageChanged(t){this.shopService.getShopParams();const e=this.shopService.getPaginationParams();e.PageIndex!==t&&(e.PageIndex=t,this.shopService.setPaginationParams(e),this.getProducts())}onAllProductClick(){const t=new p,e=new a;this.shopService.setShopParams(t),this.shopService.setPaginationParams(e),this.getProducts()}onSortSelected(t){const e=this.shopService.getShopParams();e.sort=t,this.shopService.setShopParams(e),this.getProducts()}getProductTypes(){this.shopService.getProductTypes().subscribe(t=>{this.productTypeList=t.data.filter(t=>0===t.level),this.productTypeList.forEach(t=>t.childType=[]),t.data.filter(t=>1===t.level).forEach(t=>{this.productTypeList.forEach(e=>{t.parentId===e.id&&e.childType.push(t)})})},t=>{console.log(t)})}getProducts(){this.shopService.getProducts().subscribe(t=>{var e;this.products=null===(e=t.body)||void 0===e?void 0:e.data;var n=t.headers.get("x-pagination");this.paginationParams=JSON.parse(n)},t=>{404===t.error.statusCode&&(this.products=[],this.shopParams=new p,this.paginationParams=new a,this.error=t.error.message)})}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(u))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-shop"]],viewQuery:function(t,e){if(1&t&&c.Bc(y,1),2&t){let t;c.oc(t=c.Zb())&&(e.searchTerm=t.first)}},decls:12,vars:8,consts:[[1,"container","mt-6"],[1,"row"],[1,"col-3"],[4,"ngIf"],[1,"col-9"],[1,"d-flex","justify-content-between","align-items-center","pb-2"],[3,"totalCount","pageIndex","pageSize"],["class","form-inline mt-2",4,"ngIf"],["class","col-4 mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center mt-5",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"text-warning","ml-3","mt-3","mb-4"],[1,"form-select","mb-4",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"accordion",3,"closeOthers"],[1,"btn","btn-primary","ml-4","mb-3","mt-3",3,"click"],["class","list-group-item",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"list-group-item"],[3,"heading"],[2,"cursor","pointer","text-align","center",3,"click"],[1,"form-inline","mt-2"],["type","text","placeholder","\u8acb\u8f38\u5165\u95dc\u9375\u5b57",1,"form-control","mr-2",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-primary","my-2","fa","fa-search",3,"click"],[1,"btn","btn-outline-success","ml-2","my-2","fa","fa-times-circle",3,"click"],[1,"col-4","mb-4"],[3,"product"],[1,"d-flex","justify-content-center","mt-5"],[1,"d-flex","justify-content-center"],[3,"pageSize","totalCount","pageIndex","pageChanged"]],template:function(t,e){1&t&&(c.Rb(0,"div",0),c.Rb(1,"div",1),c.Rb(2,"section",2),c.vc(3,R,10,3,"ng-container",3),c.Qb(),c.Rb(4,"section",4),c.Rb(5,"div",5),c.Mb(6,"app-paging-header",6),c.vc(7,k,5,0,"div",7),c.Qb(),c.Rb(8,"div",1),c.vc(9,w,2,1,"div",8),c.Qb(),c.vc(10,I,2,1,"h1",9),c.vc(11,C,2,3,"div",10),c.Qb(),c.Qb(),c.Qb()),2&t&&(c.Ab(3),c.gc("ngIf",e.productTypeList),c.Ab(3),c.gc("totalCount",e.paginationParams.TotalCount)("pageIndex",e.paginationParams.PageIndex)("pageSize",e.paginationParams.PageSize),c.Ab(1),c.gc("ngIf",e.products),c.Ab(2),c.gc("ngForOf",e.products),c.Ab(1),c.gc("ngIf",e.paginationParams.TotalCount<=0),c.Ab(1),c.gc("ngIf",e.paginationParams.TotalCount>0))},directives:[i.l,l.a,i.k,g.a,m.k,m.o,g.c,P,v.a],styles:[".list-group-item[_ngcontent-%COMP%]{cursor:pointer;border:none;padding:10px 20px;font-size:1.1em}.list-group-item[_ngcontent-%COMP%]:focus{outline:none}.list-group-item.active[_ngcontent-%COMP%]{border-radius:10px}.list-group-item[_ngcontent-%COMP%]:not(.active):hover{color:#fff;background-color:rgba(233,86,32,.705);border-radius:10px}button[_ngcontent-%COMP%]{text-decoration:none}"]}),t})()},{path:":id",component:h,data:{breadcrumb:{alias:"productDetails"}}}];let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[o.g.forChild(O)],o.g]}),t})();var A=n("PCNd");let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({imports:[[i.c,A.a,T]]}),t})()}}]);